# ============================================
# ZATCA App - Remote PostgreSQL Configuration
# ============================================
# Use this configuration when connecting to a remote PostgreSQL server
# Copy this to .env and update with your remote database details

# ============================================
# Remote Database Configuration
# ============================================
# Replace with your remote PostgreSQL server details
DATABASE_HOST=your-postgres-server.example.com
DATABASE_PORT=5432
DATABASE_USERNAME=zatca_user
DATABASE_PASSWORD=CHANGE_TO_YOUR_DATABASE_PASSWORD
DATABASE_NAME=zatca

# Alternative examples:
# - AWS RDS: mydb.xxxxxxxxxxxx.us-east-1.rds.amazonaws.com
# - Azure: myserver.postgres.database.azure.com
# - Google Cloud: 10.x.x.x (Cloud SQL private IP)
# - Self-hosted: 192.168.1.100 or db.mycompany.com
# - Docker network: postgres-container-name (if in same network)

# ============================================
# Security Configuration (REQUIRED)
# ============================================
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=GENERATE_WITH_openssl_rand_hex_32

# Generate with: openssl rand -base64 32
JWT_SECRET=GENERATE_WITH_openssl_rand_base64_32

JWT_EXPIRES_IN=24h

# ============================================
# Admin User Configuration
# ============================================
ADMIN_USERNAME=admin

# Default password: Admin@123
# Generate custom hash with: docker run --rm node:22-alpine sh -c "npm install -g bcryptjs && node -e \"console.log(require('bcryptjs').hashSync('YourPassword', 10))\""
ADMIN_PASSWORD_HASH=$2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhWy

# ============================================
# Application Configuration
# ============================================
NODE_ENV=production
PORT=3000
LOG_LEVEL=info

# ============================================
# ZATCA API Configuration
# ============================================
ZATCA_ENVIRONMENT=sandbox

# ZATCA URLs (no need to change)
# ZATCA API URLs
ZATCA_SANDBOX_URL=https://gw-fatoora.zatca.gov.sa/e-invoicing/developer-portal
ZATCA_SIMULATION_URL=https://gw-fatoora.zatca.gov.sa/e-invoicing/simulation
ZATCA_PRODUCTION_URL=https://gw-fatoora.zatca.gov.sa/e-invoicing/core
# ============================================
# Optional Configuration
# ============================================
ENABLE_DEBUG_FILES=false

# ============================================
# REMOTE DATABASE SETUP CHECKLIST
# ============================================
# Before running the application, ensure:
#
# 1. PostgreSQL server is running and accessible
#    Test with: telnet your-postgres-server.example.com 5432
#    Or: nc -zv your-postgres-server.example.com 5432
#
# 2. Database 'zatca' is created
#    Run: CREATE DATABASE zatca;
#
# 3. User has proper permissions
#    Run: GRANT ALL PRIVILEGES ON DATABASE zatca TO zatca_user;
#
# 4. Firewall allows connections
#    - Cloud provider: Security group/firewall rules
#    - Self-hosted: iptables/firewalld rules
#
# 5. PostgreSQL is configured for remote connections
#    postgresql.conf: listen_addresses = '*'
#    pg_hba.conf: host all all 0.0.0.0/0 md5
#    (Or specific IP ranges for better security)
#
# 6. SSL/TLS is configured (recommended for production)
#    Add to DATABASE_HOST: ?sslmode=require
#    Example: DATABASE_HOST=myserver.postgres.azure.com?sslmode=require

# ============================================
# CONNECTION STRING EXAMPLES
# ============================================
#
# Standard PostgreSQL:
#   DATABASE_HOST=192.168.1.100
#   DATABASE_PORT=5432
#
# AWS RDS:
#   DATABASE_HOST=mydb.xxxxxxxxxxxx.us-east-1.rds.amazonaws.com
#   DATABASE_PORT=5432
#
# Azure Database for PostgreSQL:
#   DATABASE_HOST=myserver.postgres.database.azure.com
#   DATABASE_PORT=5432
#   DATABASE_USERNAME=admin@myserver
#
# Google Cloud SQL:
#   DATABASE_HOST=10.x.x.x (private IP)
#   DATABASE_PORT=5432
#
# DigitalOcean Managed Database:
#   DATABASE_HOST=your-db-do-user-xxxx-0.db.ondigitalocean.com
#   DATABASE_PORT=25060

# ============================================
# DEPLOYMENT COMMANDS
# ============================================
#
# 1. Copy this file:
#    cp .env.remote-db .env
#
# 2. Update database connection details above
#
# 3. Generate secrets:
#    ENCRYPTION_KEY=$(openssl rand -hex 32)
#    JWT_SECRET=$(openssl rand -base64 32)
#
# 4. Update ENCRYPTION_KEY and JWT_SECRET in .env
#
# 5. Test database connection:
#    docker run --rm --env-file .env postgres:16-alpine psql -h $DATABASE_HOST -U $DATABASE_USERNAME -d $DATABASE_NAME -c "SELECT version();"
#
# 6. Deploy application:
#    docker-compose -f docker-compose.remote-db.yml up -d
#
# 7. Check logs:
#    docker-compose logs -f app
#
# 8. Access application:
#    http://localhost:3000
